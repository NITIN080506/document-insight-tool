<!doctype html>
<html>
<head><meta charset="utf-8"><title>Document Insight - Upload</title></head>
<body>
  <h2>Upload PDF Resume</h2>
  <input type="file" id="file" accept=".pdf"><button id="upload">Upload</button>
  <h3>Result</h3>
  <pre id="result" style="background:#f3f3f3;padding:10px;"></pre>

  <h3>History (last 10)</h3>
  <pre id="history" style="background:#f9f9f9;padding:10px;"></pre>

<script>
document.getElementById('upload').onclick = async () => {
  const f = document.getElementById('file').files[0];
  if (!f) { alert("Choose a PDF file"); return; }
  const fd = new FormData(); fd.append('file', f);
  const res = await fetch('/upload-resume', { method:'POST', body: fd });
  const data = await res.json();
  document.getElementById('result').innerText = JSON.stringify(data, null, 2);
  loadHistory();
}

async function loadHistory(){
  const res = await fetch('/insights');
  const data = await res.json();
  document.getElementById('history').innerText = JSON.stringify(data, null, 2);
}
loadHistory();
</script>
</body>
</html>
